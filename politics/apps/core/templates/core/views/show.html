{% extends "core/base.html" %}

{% load core %}

{% block html-class %}
    {{ block.super }}
    view
{% endblock %}

{% block title %}{{ view.issue.name }} â€“ {{ view.party.name }}{% endblock %}

{% block content %}
    {{ block.super }}
    <div id="content-primary">
        <h1>
            <a href="{% url core:parties:show view.party.pk view.party.slug %}">{{ view.party.name }}</a> /
            <strong><a href="{% url core:issues:show view.issue.pk view.issue.slug %}">{{ view.issue.name }}</a></strong>
        </h1>

        <p class="stance">
            Current stance: <span class="{{ view.stance }}">{{ view.get_stance_display }}</span>
        </p>

        <ol class="tabs">
            <li {% if show_current %}class="selected"{% endif %}><a href="{% query_string archived=0 %}">Current</a></li>
            <li {% if not show_current %}class="selected"{% endif %}><a href="{% query_string archived=1 %}">Archived</a></li>
        </ol>

        <div class="references">
            {% for reference in references %}
                {% include "core/views/_reference.html" %}
            {% empty %}
                {% if show_current %}
                    <i>There aren't any references. Why not submit one?</i>
                {% else %}
                    <i>There are no archived references for this view.</i>
                {% endif %}
            {% endfor %}
        </div>

        {% if request.user.is_authenticated %}
            <h2 class="section">Add a Reference</h2>
            <form class="reference" method="post">
                {% include "core/references/_form.html" %}
                <p><input type="submit" value="Add"/></p>
            </form>
        {% endif %}
    </div>
{% endblock %}
