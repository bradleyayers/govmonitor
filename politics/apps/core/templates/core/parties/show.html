{% extends "core/parties/base.html" %}

{% load core %}

{% block title %}{{ party.name }}{% endblock %}

{% block content %}
    {{ block.super }}
    <div id="content-primary">
        <h1><a href="{% url core:parties:list %}">Parties</a> / <strong>{{ party.name }}</strong></h1>

        <ol class="tabs">
            <li {% if request.GET.issues != "unknown" %}class="selected"{% endif %}><a href="{% query_string issues="known" %}" id="tab-known">Known</a></li>
            <li {% if request.GET.issues == "unknown" %}class="selected"{% endif %}><a href="{% query_string issues="unknown" %}" id="tab-unknown">Unknown</a></li>
        </ol>

        {% for view in views %}
            <div class="view-summary{% cycle "" " right" %}">
                <h3><a href="{% url core:issues:show view.issue.pk view.issue.slug %}" title="{{ view.issue.name }}">{{ view.issue.name }}</a></h3>
                <ul class="stats">
                    <li class="updated">Last updated <strong>{{ view.updated_at|interval_string }}</strong> ago</li>
                </ul>
                <a class="stance {{ view.stance }}" href="{% url core:views:show view.pk view.slug %}">{{ view.get_stance_display }}</a>
            </div>
        {% endfor %}
    </div>

    <div id="content-secondary">
        {% if party_similarities %}
            <h2 class="section">Similar Parties <a class="help" href="{% url core:about %}#question-party-similarity">?</a></h2>
            <ol class="similar-parties">
                {% for party_similarity in party_similarities|slice:":3" %}
                    {% with other_party=party_similarity.second_party %}
                        <li>
                            <span>{{ party_similarity.percentage_similarity|floatformat:0 }}%</span>
                            <a href="{% url core:parties:show other_party.pk other_party.slug %}">{{ other_party.name }}</a>
                        </li>
                    {% endwith %}
                {% endfor %}
            </ol>
        {% endif %}
    </div>
{% endblock %}
